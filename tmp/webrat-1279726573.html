<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Wee Day Out</title>
	<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=" type="text/javascript">
  </script>
  <link href="/stylesheets/weedayout.css?1279643873" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/buttons.css?1279625342" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/jquery-1.3.2.min.js?1279625342" type="text/javascript"></script>
<script src="/javascripts/lowpro.jquery.js?1279625342" type="text/javascript"></script>
<script src="/javascripts/application.js?1279625342" type="text/javascript"></script>
<script src="/javascripts/latlongmap.js?1279625342" type="text/javascript"></script>
</head>
<body>
<div class="outer_wrapper">
<div class="inner_wrapper">
  <div class="header">
    <a href="/" class="logo_link">weedayout.com</a>
    <h2>Putting accessible features on the map.</h2>
  
    <div class="main_nav">
      <ul>
        <li class="home"><a href="/">Home</a></li>
        <li class="add_facility"><a href="/toilets/new">Add a Facility</a></li>
        <!-- <li class="add_gap"><a href="add/gap/path">Add a Gap</a></li> -->
      </ul>
      <div class="bar"></div>
    </div>
  </div>
  
  <div class="main">
    
<div class="main_inner">
  
  <div class="left">
    <h1 class="text_replacement search_results">Search Results</h1>
    <div id="map" style="height: 350px; width: 350px"></div>
  </div><!-- /.left -->
  
  <div class="right">

    <form action="/toilets" class="refine_search clearfix" method="get">
      
      <div class="location_param clearfix">
      <label for="location">Location:</label>
      <input id="location" name="location" type="text" value="E11 1PB" />
      </div>
      <span class="refine_search_container"><input class="button refine_search_button" name="commit" type="submit" value="Refine Search" /></span>
      <div class="attributes">
        <input id="hoist" name="hoist" type="checkbox" value="1" />
        <label for="hoist">Hoist</label><br />
        <input id="changingbench" name="changingbench" type="checkbox" value="1" />
        <label for="changingbench">Changing Bench</label>
      </div><!-- /.attributes -->
    </form>
    
    
      <h2>Closest Facilities...</h2>
      <table class="search_results">
        <tr class="separator">
          <td colspan="3">
            <hr />
          </td>
        </tr>
        
        
          <tr id="row_1">
            <td class="marker"><span class="pin">A</span></td>
            <td class="address">
              Westminster Bridge<br />
              close<br />
              <span class="cross">Hoist</span>
              <span class="cross">Changing Bench</span>
            </td>
            <td class="details">
              <a href="/toilets/westminster-bridge" id="details_link_1">View Details</a>
            </td>
          </tr>
          
            <tr class="separator">
              <td colspan="3">
                <hr />
              </td>
            </tr>
          
          
        
          <tr id="row_2">
            <td class="marker"><span class="pin">B</span></td>
            <td class="address">
              Lambeth Bridge<br />
              1 degree  away<br />
              <span class="cross">Hoist</span>
              <span class="cross">Changing Bench</span>
            </td>
            <td class="details">
              <a href="/toilets/lambeth-bridge" id="details_link_2">View Details</a>
            </td>
          </tr>
          
            <tr class="separator">
              <td colspan="3">
                <hr />
              </td>
            </tr>
          
          
        
          <tr id="row_3">
            <td class="marker"><span class="pin">C</span></td>
            <td class="address">
              London Bridge<br />
              2 degrees away<br />
              <span class="cross">Hoist</span>
              <span class="cross">Changing Bench</span>
            </td>
            <td class="details">
              <a href="/toilets/london-bridge" id="details_link_3">View Details</a>
            </td>
          </tr>
          
          
        
      </table>
      <a href="/toilets/new?search_location=E11+1PB">Know of anything closer?</a>
      <a href="/toilets/new?search_location=E11+1PB">Add a new toilet here.</a>
    
    
  </div><!-- /.right -->

  

</div><!-- /.main_inner -->


  <script type="text/javascript">
//<![CDATA[


      map = new GMap2(document.getElementById("map"));

      function addMarker(index, lng, lat, name, address, link) {

          // use a custom icon with letter A - Z
          var letter = String.fromCharCode("A".charCodeAt(0) + (index - 1));
          var myIcon = new GIcon(G_DEFAULT_ICON, "http://www.google.com/mapfiles/marker" + letter + ".png");
          myIcon.printImage = "http://maps.google.com/mapfiles/marker"+letter+"ie.gif"
          myIcon.mozPrintImage = "http://maps.google.com/mapfiles/marker"+letter+"ff.gif"

          var point = new GPoint(lng, lat);
          var thisHTML = "<h4 class='name'>" + name + "<\/h4><p class='address'>" + address + "<\/p><p><a href='" + link + "'>details<\/a><\/p>";
          var marker = new GMarker(point, {draggable:false, icon:myIcon});
          var infoFunction = function() {
              marker.openInfoWindowHtml(thisHTML);
          };

          GEvent.addListener(marker, "click", infoFunction);
          map.addOverlay(marker);
          $('#row_' + index).find('td[class!=details]').click(infoFunction);
      }
      
      if (GBrowserIsCompatible()) {
          geocoder = new GClientGeocoder();
          geocoder.setBaseCountryCode("GB");
          geocoder.getLatLng(
            "E11 1PB",
            function(point) {
                if (!point) {
					//TODO: Add could not find location
                } else {
                    map.setCenter(point, 12);
                }
            }
          );

          map.addControl(new GMapTypeControl());
          map.addControl(new GLargeMapControl());
          map.enableDoubleClickZoom();

          
            
               addMarker(1, 51.58, 0.02, "Westminster Bridge", "close",
                       "/toilets/westminster-bridge" ); // todo: escape '"'?
            
               addMarker(2, 52.58, 0.02, "Lambeth Bridge", "1 degree  away",
                       "/toilets/lambeth-bridge" ); // todo: escape '"'?
            
               addMarker(3, 53.58, 0.02, "London Bridge", "2 degrees away",
                       "/toilets/london-bridge" ); // todo: escape '"'?
            
          
      }
  
//]]>
</script>


  </div>

</div>
</div>
<!-- WeeDayOut at www.example.com -->
</body>
</html>
